(this.webpackJsonpsystag=this.webpackJsonpsystag||[]).push([[0],{34:function(t,e,n){},35:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var i=n(2),a=n.n(i),o=n(20),s=n.n(o),c=(n(34),n(7)),r=n(25),l=n(6),d=(n.p,n(35),n(24)),u=n(1),f=864e5;function g(t,e){if(""===t)return!0;var n=t.split(" "),i=n.findIndex((function(t){return"today"===t}));-1!==i&&(n.splice(i,1),i=!0);var a=n.findIndex((function(t){return"lastWeek"===t}));-1!==a&&(n.splice(a,1),a=!0);var o=n.findIndex((function(t){return"lastMonth"===t}));-1!==o&&(n.splice(o,1),o=!0);var s=n.filter((function(t){return e.tags.some((function(e){return e.startsWith(t)}))})),c=n.length===s.length,r=!0;return!0===i&&(r=r&&e.lastMutation>Date.now()-1*f),!0===a&&(r=r&&e.lastMutation>Date.now()-7*f),!0===o&&(r=r&&e.lastMutation>Date.now()-30*f),c&&r}function p(t){var e=t.file,n=e.content,i=e.tags,a=e.lastMutation,o=t.dispatch;return Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"5px",background:"#ccc"},children:[i.map((function(t,e){return Object(u.jsx)(h,{tag:t,dispatch:function(t){return o(Object(c.a)(Object(c.a)({},t),{},{tagIndex:e}))}})})),Object(u.jsx)("div",{style:{margin:"0px 10px",height:"32px",width:"1px",background:"#bbb"}}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{fontSize:"0.8em",fontWeight:"500"},children:new Date(a).toLocaleDateString()}),Object(u.jsxs)("div",{style:{fontSize:"0.8em",fontWeight:"500"},children:[n.length," bytes"]})]})]})}function h(t){var e=t.tag,n=t.dispatch,a=Object(i.useState)(!1),o=Object(l.a)(a,2),s=o[0],c=o[1],r=Object(i.useRef)();return Object(i.useEffect)((function(){var t=function(t){r.current&&!r.current.contains(t.target)&&c(!1)};return s&&document.body.addEventListener("click",t),function(){try{document.body.removeEventListener("click",t)}catch(e){}}}),[s]),Object(u.jsxs)("div",{onClick:function(){return c((function(t){return!t}))},style:{padding:"3px",fontSize:"0.8em",fontWeight:"500",position:"relative",cursor:"pointer"},children:[e,Object(u.jsx)("div",{ref:r,style:{display:s?"flex":"none",position:"absolute",left:"0px",top:"0px",transform:"translate(50%,-100%)",cursor:"pointer"},children:Object(u.jsx)("div",{style:{background:"red",padding:"5px"},onClick:function(){return n({command:"deleteTag"})},children:"x"})})]})}function j(t){var e=t.file,n=e.content,i=e.tags,a=(e.lastMutation,i.includes("image")),o=!a&&i.includes("config"),s=!1;try{if(o){JSON.parse(n);s=!0}}catch(c){}return s?Object(u.jsx)("div",{style:{color:"#444",whiteSpace:"pre"},children:JSON.stringify(JSON.parse(n),null,1)}):a?Object(u.jsx)("img",{src:n,style:{height:"50px"}}):Object(u.jsx)("div",{style:{color:"#444"},children:n})}var b=function(){var t=Object(i.useState)({files:[{id:1,tags:["image","jpeg","Toto"],content:"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",lastMutation:Date.now()-f},{id:2,tags:["config","postgres"],content:"BINARYBLOBIBOULGA$\xf9*$\xf9$",lastMutation:Date.now()-2*f},{id:3,tags:["config","keyboard"],content:JSON.stringify({lng:"fr"}),lastMutation:Date.now()-2*f},{id:4,tags:["config","mouse"],content:JSON.stringify({speed:3}),lastMutation:Date.now()-2*f},{id:5,tags:["config","location"],content:JSON.stringify({utcZone:"GMT+2",countryCode:"FR"}),lastMutation:Date.now()-2*f},{id:6,tags:["config","wifi"],content:JSON.stringify([{SSID:"Wifi maison",code:"tralala"},{SSID:"Wifi travail",code:"tsoin tsoin"}]),lastMutation:Date.now()-2*f},{id:7,tags:["work","english","essay","done"],content:"Dogs are good, in this essay we will prove why. No antithesis.",lastMutation:Date.now()-3*f},{id:8,tags:["work","math","dm","done"],content:"1+1=11",lastMutation:Date.now()-3*f},{id:9,tags:["work","english","essay","todo"],content:"Cats are evil, in this essay we will prove why. No antithesis.",lastMutation:Date.now()-3*f},{id:10,tags:["download","video","mkv","Avengers"],content:"....",lastMutation:Date.now()-3*f},{id:11,tags:["download","pdf","stripe-invoice"],content:"....",lastMutation:Date.now()-1*f},{id:12,tags:["download","video","mkv","XMen"],content:"....",lastMutation:Date.now()-0},{id:13,tags:["app","resources","skype","blob1"],content:"....",lastMutation:Date.now()-4*f},{id:14,tags:["app","resources","skype","blob2"],content:"....",lastMutation:Date.now()-5*f},{id:15,tags:["app","config","skype","user"],content:"@thomas\ncode",lastMutation:Date.now()-6*f},{id:16,tags:["app","exe","skype"],content:"....",lastMutation:Date.now()-0},{id:17,tags:["app","exe","vs-code"],content:"....",lastMutation:Date.now()-8*f},{id:18,tags:["app","exe","firefox"],content:"....",lastMutation:Date.now()-3*f}]}),e=Object(l.a)(t,2),n=e[0],a=e[1],o=Object(i.useState)(""),s=Object(l.a)(o,2),h=s[0],b=s[1],x=Object(i.useMemo)((function(){var t=[],e=[];return n.files.forEach((function(n){n.id;var i=n.tags;n.content,n.lastMutation;g(h,n)&&(t.push(n),i.forEach((function(i){t.forEach((function(t){var a=!0;t.tags.forEach((function(o){a&&o===i&&(a=!1,e.push({source:n.id,target:t.id}))}))}))})))})),{nodes:t,links:e}}),[n,h]),O=Object(i.useMemo)((function(){var t=new Set;return n.files.forEach((function(e){g(h,e)&&e.tags.forEach((function(e){t.add(e)}))})),h.split(" ").forEach((function(e){return t.delete(e)})),Object(r.a)(t)}),[h,n]);return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("input",{style:{padding:"10px",fontSize:"1em",border:"none",outline:"none",backgroundColor:"#eee",margin:"10px"},placeholder:"search tag",value:h,onChange:function(t){return b(t.target.value)},onKeyDown:function(t){console.log(t.code),"Tab"===t.code&&(t.preventDefault(),b((function(t){return t+" "})))}}),Object(u.jsx)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:O.map((function(t){return Object(u.jsx)("div",{style:{fontSize:"0.8em",fontWeight:"500",margin:"0px 5px",cursor:"pointer"},onClick:function(){return b((function(e){return e+" "+t}))},children:t})}))})]}),Object(u.jsx)(d.a,{graphData:x}),Object(u.jsx)("div",{style:{whiteSpace:"pre",display:"flex",flexWrap:"wrap"},children:n.files.map((function(t,e){return Object(u.jsxs)("div",{style:{background:"#eee",margin:"10px",display:g(h,t)?"block":"none"},children:[Object(u.jsx)(p,{file:t,fileIndex:e,dispatch:function(t){return function(t){switch(console.log("dispatch "+t),t.command){case"deleteTag":a((function(e){var n,i,a,o=Object(c.a)({},e);return n=o,i=t.fileIndex,a=t.tagIndex,n.files[i].tags.splice(a,1),o}))}}(Object(c.a)(Object(c.a)({},t),{},{fileIndex:e}))}}),Object(u.jsx)("div",{style:{padding:"5px"},children:Object(u.jsx)(j,{file:t})})]})}))})]})},x=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),i(t),a(t),o(t),s(t)}))};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(b,{})}),document.getElementById("root")),x()}},[[51,1,2]]]);
//# sourceMappingURL=main.1b73d08f.chunk.js.map